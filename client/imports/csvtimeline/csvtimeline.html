<!-- /#sidebar-wrapper -->
<!--*** main code starts here ****-->
<!-- timeline page head timeline bar -->
<div class="white r box-shadow-z0 m-b navbar-md" style="width: 125%;">
    <div class="navbar ng-scope" style="margin-left: 18px;">
        <a data-toggle="collapse" data-target="#navbar-0" class="navbar-item pull-left hidden-md-up">
        </a>
        <div class="navbar-item pull-left ng-binding"  id="pageTitle"><h3>Timeline</h3></div>
        <ul class="nav navbar-nav pull-right m-l">
            <li class="nav-item dropdown">
            </li>      
        </ul>
    </div>
</div>
<!-- timeline page calander -->
<div class="pos-rlt">
    <div class="calender ng-pristine ng-untouched ng-valid ng-isolate-scope ng-not-empty fc fc-ltr fc-unthemed" config="uiConfig.calender" ui-calender="uiConfig.calender">
        <div class="fc-toolbar">
            <div class="fc-left">
                <button type="button" class="fc-prev-button fc-button fc-state-default fc-corner-left fc-corner-right" (click)="csvdatamonthlyminus()">
                    <span class="fc-icon fc-icon-left-single-arrow" >
                        <!--                        ::after-->
                    </span>
                </button>
            </div>
            <div class="fc-right">
                <button type="button" class="fc-next-button fc-button fc-state-default fc-corner-left fc-corner-right" (click)="csvdatamonthlyplus()">
                    <span class="fc-icon fc-icon-right-single-arrow" >

                    </span>
                </button>
            </div>
            <div class="fc-center">
                <!--                ***** for format use {{ data_month | date :'MMMM y'}} ****-->
                <h2>{{ month_in_headbar }}</h2>
            </div>
        </div>
    </div>
</div>
<!-- timeline page calender ends here -->

<!-- Page Content -->
<div id="page-content-wrapper">
    <div class="container-fluid">
        <div class="row">
            <!-- flatfull code -->

            <div>
                <div class="padding">
                    <ul class="timeline timeline-center" >
                        <li class="tl-header">
                            <div class="btn white active" >Excellence Transaction</div>
                        </li>
                        <li  *ngFor="let data of csvdata" class="{{data['Cr/Dr'] === 'DR' ? 'tl-item' : 'tl-item tl-left'}}">
                            <div class="tl-wrap {{data['Cr/Dr'] == 'DR' ? 'b-primary' : 'b-success'}}">

                                <span class="tl-date text-muted">{{data["Value_Date"]}}</span>
                                                                                            <!-- *** ***-->
                                <div  class="tl-content box-color {{data['Cr/Dr'] === 'DR' ? 'text-color  w-auto-xs' : 'info block'}}">
                                    <span class="arrow left pull-top {{data['Cr/Dr'] === 'DR' ? 'b-white' : 'b-info  hidden-left '}}"></span>
                                    <span *ngIf="data['Cr/Dr'] !== 'DR'" class="arrow b-info right pull-top visible-left"></span>
                                    <div class="p-x m-b-sm text-lt">Transaction Amount: {{data["Transaction_Amount(INR)"]}} INR ({{data["Cr/Dr"]}})</div>
                                    <div class=" b-t b-light p-a">
                                        Details: {{data["Description"]}} <br>
                                        Available Balance : {{data["Available_Balance(INR)"]}} <br><br>
                                        <div *ngIf="data.is_processed==1" style="width: 50%; display: inline;">
                                            <a class="text-u-c btn btn-lab {{data['Cr/Dr'] == 'DR' ? 'info' : 'category-color-for-blue'}} " 
                                               data-toggle="modal" href="#{{data._id}}">{{data["Assigned_category"]}}</a>

                                            <!--    // this is the format for calling popup menu 
                                            <a data-toggle="modal" href="#myModal">Open Modal</a>-->
                                            <!-- Modal -->
                                            <div class="modal fade " id="{{data._id}}" role="dialog">
                                                <div class="modal-dialog modal-sm">
                                                    <!-- Modal content-->
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times fa-2x" aria-hidden="true"></i></button>
                                                            <h5 class="modal-title">Choose from options to change category </h5>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="dropdown">
                                                                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                                                                    Choose Cateogry
                                                                    <span class="caret"></span>
                                                                </button>
                                                                <ul class="dropdown-menu">
                                                                    <li *ngFor="let category of productcategory">
                                                                        <a data-dismiss="modal" (click)="changecategory(data._id,category.category)">{{category.category}}</a>
                                                                    </li>

                                                                </ul>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                        </div>
                                                    </div>
                                                </div>                              
                                            </div>
                                        </div>
                                        <!--  ****** this block is for invoice info add *****-->
                                        <div *ngIf="data['Cr/Dr'] == 'DR'" style="display: inline;float: right;">
                                            <a class="text-u-c btn btn-lab" style="background: #00BCD4;color: rgba(255,255,255,.87);"
                                           data-toggle="modal" href="#{{data.Transaction_ID}}">Invoice</a>

                                            <!--    // this is the format for calling popup menu 
                                            <a data-toggle="modal" href="#myModal">Open Modal</a>-->
                                            <!-- Modal -->
                                            <div class="modal fade " id="{{data.Transaction_ID}}" role="dialog">
                                                <div class="modal-dialog modal-sm">
                                                    <!-- Modal content-->
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times fa-2x" aria-hidden="true"></i></button>
                                                            <h5 class="modal-title">Enter details of Invoice</h5>
                                                        </div>
                                                        <div class="modal-body">
                                                            <form [formGroup]="addForm" class="box">
                                                                <input type="text" placeholder="Enter Invoice No" formControlName="invoice_no"
                                                                       class="form-control no-border no-bg box-shadow-z0" 
                                                                       style="display: inline;
                                                                       width: 99%;
                                                                       height: 37px;
                                                                       padding: 6px 0px 6px 8px;
                                                                       outline: none;
                                                                       outline-color: none;
                                                                       "/>
                                                                <textarea rows="6" cols="10" placeholder="Description" formControlName="description"
                                                                       class="form-control no-border no-bg box-shadow-z0" 
                                                                       style="display: inline;
                                                                       width: 99%;
/*                                                                       height: 37px;*/
                                                                       padding: 6px 0px 6px 8px;
                                                                       outline: none;
                                                                       outline-color: none;">
                                                                </textarea>
                                                                <br/>
                                                                <br/>
                                                                <button type="submit" data-dismiss="modal" (click)="addInvoice(data._id)" class="btn btn-primary"> Add </button>
                                                            </form>   
                                                        </div>
                                                        <div class="modal-footer">
                                                        </div>
                                                    </div>
                                                </div>                              
                                            </div>
                                            <!-- ****** end of invoice info add **** -->
                                        </div>

                                    </div>

                                </div>
                                <div *ngIf="data.invoice_no!=='not_assigned'" class=" box-color primary p-a-sm" style="
                                       width: 56%;
                                       height: auto;
                                       box-shadow: 4px 5px 5px #BDDADE;">
                                    <div class="text-lt"><span>Invoice No :</span> {{data.invoice_no}}</div>
                                     <hr style="margin-top: 0px;margin-bottom: 10px;border: 0;border-top: 1px solid #87D8E2;">
                                     <div class="text-lt"><span>invoice description :</span> 
                                         <br/>
                                         {{data.invoice_description}}
                                     </div>
                                     </div>
                                
                        </li>
                    </ul>

                </div>

            </div>
            <!-- flatfull code -->

        </div>
    </div>
</div>
<!-- /#page-content-wrapper -->
<!--*** main code ends here ****-->


